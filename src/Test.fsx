#r "bin/Debug/MongoDB.Bson.dll"
#r "bin/Debug/FSharp.Data.dll"

open System
open System.IO
open System.Text
open MongoDB.Bson
open FSharp.Data
open FSharp.Data.Runtime

let sample = BsonDocument("a", BsonInt32(1))
type Foo = BsonProvider<sample>

type Simple = BsonProvider<"\x16\x00\x00\x00\x02hello\x00\x06\x00\x00\x00world\x00\x00">
let simple = Simple.Parse("\x16\x00\x00\x00\x02hello\x00\x06\x00\x00\x00world\x00\x00")

printf "%A\n" simple.BsonValue
printf "%A\n" simple.Hello

type Complex = BsonProvider<"\x31\x00\x00\x00\x04BSON\x00\x26\x00\x00\x00\x020\x00\x08\x00\x00\x00awesome\x00\x011\x00\x33\x33\x33\x33\x33\x33\x14\x40\x102\x00\xc2\x07\x00\x00\x00\x00">
let complex = Complex.Parse("\x31\x00\x00\x00\x04BSON\x00\x26\x00\x00\x00\x020\x00\x08\x00\x00\x00awesome\x00\x011\x00\x33\x33\x33\x33\x33\x33\x14\x40\x102\x00\xc2\x07\x00\x00\x00\x00")

printf "%A\n" complex.BsonValue
printf "%A\n" complex.Bson.Numbers
